theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
ggplot(od_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 70, vjust = 0.5, hjust=1))
ggplot(od_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 60, vjust = 0.5, hjust=1))
ggplot(od_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
od_stat_journals <- with(data, CrossTable(journal_name, od_stat_bool, prop.chisq = FALSE, missing.include = FALSE))
ggplot(od_perc_filtered, aes(x=year, y=percent, group = 1)) + geom_line() +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
labs(title = "Percentage of statistical inference papers with open data",
x = "Year of publication", y = "Percent") +
theme_light() +
theme(plot.title = element_text(hjust = 0.5))
ggplot(od_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
labs(title = "Percentage of statistical inference papers with open data by journal",
x = "Journal", y = "Percent")
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
ggplot(od_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of statistical inference papers with open data by journal",
x = "Journal", y = "Percent")
ggplot(od_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of statistical inference papers with open data by journal",
y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
ggplot(od_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of statistical inference papers with open data by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
ggplot(od_perc_filtered, aes(x=year, y=percent, group = 1)) + geom_line() +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
labs(title = "Percentage of statistical inference papers with open data",
x = "Year of publication", y = "Percent") +
theme_light() +
theme(plot.title = element_text(hjust = 0.5))
View(od_perc_filtered)
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(vitae)
library(dplyr)
knitr::write_bib(c("vitae", "tibble"), "bib.bib")
bibliography_entries("bib.bib") %>%
arrange(desc(author$family), issued)
library(dplyr)
library(tidyverse)
library(rbenchmark)
library(tidyr)
library(ggplot2)
library(gmodels)
library(data.table)
setwd("/Volumes/PortableSSD/trust_us/output")
data <- read.csv("/Volumes/PortableSSD/trust_us/output/109k_papers_all_coded_for_pub1.csv")
#Edit variables for SI and DA
data$od_stat_bool <- ifelse(data$stat_bool!=1, NA,
ifelse(data$dv_doi_bool == 1, 1, 0))
data$od_stat_bool <- recode_factor(data$od_stat_bool, "1" = "Open Data",
"0" = "No Data")
data$od_data_bool <- ifelse(data$data_bool!=1, NA,
ifelse(data$dv_doi_bool == 1, 1, 0))
data$journal_name <- factor(data$journal_name)
#Edit variables for preregistration
data$prereg_bool <- ifelse(data$exp_bool !=1, NA,
ifelse(data$prereg_score == 2, 1, 0))
data$prereg_bool <- recode_factor(data$prereg_bool, "1" = "Preregistered",
"0" = "Not preregistered")
#Graph OD for stat_bool
od_stat_summary <- with(data, CrossTable(published_print_year, od_stat_bool,
prop.chisq = FALSE, missing.include = FALSE))
od_percentage <- data.table(od_stat_summary$prop.row)
colnames(od_percentage) <- c("year", "od_bool", "percent")
od_perc_filtered <- od_percentage %>%
filter(od_percentage$od_bool == "Open Data")
ggplot(od_perc_filtered, aes(x=year, y=percent, group = 1)) + geom_line() +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
labs(title = "Percentage of statistical inference papers with open data",
x = "Year of publication", y = "Percent") +
theme_light() +
theme(plot.title = element_text(hjust = 0.5))
#Explore OD by journals
od_stat_journals <- with(data, CrossTable(journal_name, od_stat_bool,
prop.chisq = FALSE, missing.include = FALSE))
#Remove journals that have no SI papers
od_stat_journals_zeros <- data.table(od_stat_journals$t)
colnames(od_stat_journals_zeros) <- c("journal_name", "od_bool", "total")
od_stat_journals_zeros_filtered <- od_stat_journals_zeros %>%
filter(od_stat_journals_zeros$od_bool == "No Data")
od_stat_journals_zeros_filtered$total <- ifelse(od_stat_journals_zeros_filtered$total != 0, 1, 2)
od_stat_journals_zeros_filtered <- subset(od_stat_journals_zeros_filtered, select = -c(od_bool))
#Graph OD by journals
od_perc_journals <- data.table(od_stat_journals$prop.row)
colnames(od_perc_journals) <- c("journal_name", "od_bool", "percent")
od_journal_filtered <- od_perc_journals %>%
filter(od_perc_journals$od_bool == "Open Data")
od_journal_filtered <- merge.data.table(od_journal_filtered, od_stat_journals_zeros_filtered)
od_journal_filtered <- filter(od_journal_filtered, total!=2)
ggplot(od_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of statistical inference papers with open data by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
#Crosstab od_stat_bool for each journal type
#Filter OD graphs by journal for papers with over 200 or 300 SI papers
#Graph prereg for experiments
prereg_check <- with(data, CrossTable(prereg_score, exp_bool,
prop.chisq = FALSE, missing.include = FALSE))
prereg_summary <- with(data, CrossTable(published_print_year, prereg_bool,
prop.chisq = FALSE, missing.include = FALSE))
prereg_percentage <- data.table(prereg_summary$prop.row)
colnames(prereg_percentage) <- c("year", "prereg", "percent")
prereg_perc_filtered <- prereg_percentage %>%
filter(prereg_percentage$prereg == "Preregistered")
ggplot(prereg_perc_filtered, aes(x=year, y=percent, group = 1)) + geom_line() +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
labs(title = "Percentage of experiments that were preregistered",
x = "Year of publication", y = "Percent") +
theme_light() +
theme(plot.title = element_text(hjust = 0.5))
#Explore prereg by journals
prereg_journals <- with(data, CrossTable(journal_name, prereg_bool,
prop.chisq = FALSE, missing.include = FALSE))
#Define journals that have no experiments
prereg_journal_zeros <- data.table(prereg_journals$t)
colnames(prereg_journal_zeros) <- c("journal_name", "prereg", "total")
prereg_journal_zeros_filtered <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Not preregistered")
prereg_journal_zeros_filtered$total <- ifelse(prereg_journal_zeros_filtered$total != 0, 1, 2)
prereg_journal_zeros_filtered <- subset(prereg_journal_zeros_filtered, select = -c(prereg))
#Graph
prereg_perc_journals <- data.table(prereg_journals$prop.row)
colnames(prereg_perc_journals) <- c("journal_name", "prereg", "percent")
prereg_journal_filtered <- prereg_perc_journals %>%
filter(prereg_perc_journals$prereg == "Preregistered")
prereg_journal_filtered <- merge.data.table(prereg_journal_filtered, prereg_journal_zeros_filtered)
prereg_journal_filtered <- filter(prereg_journal_filtered, total!=2)
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
View(prereg_journal_zeros)
View(prereg_journal_filtered)
View(prereg_journal_filtered)
View(prereg_journal_zeros_filtered)
prereg_journal_zeros <- data.table(prereg_journals$t)
colnames(prereg_journal_zeros) <- c("journal_name", "prereg", "total")
prereg_journal_zeros_filtered <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Not preregistered")
prereg_journal_zeros_filtered$total <- ifelse(prereg_journal_zeros_filtered$total != 0, 1, 2)
View(prereg_journal_zeros_filtered)
prereg_journal_zeros <- data.table(prereg_journals$t)
View(prereg_journal_zeros)
prereg_journals <- with(data, CrossTable(journal_name, prereg_bool,
prop.chisq = FALSE, missing.include = FALSE))
#Define journals that have no experiments
prereg_journal_zeros <- data.table(prereg_journals$t)
colnames(prereg_journal_zeros) <- c("journal_name", "prereg", "total")
prereg_journal_zeros_filtered <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Not preregistered")
View(prereg_journal_zeros_filtered)
prereg_journal_zeros_filtered$n <- ifelse(prereg_journal_zeros_filtered$total != 0, 1, 2)
View(prereg_journal_zeros_filtered)
prereg_journal_zeros_filtered <- subset(prereg_journal_zeros_filtered, select = -c(prereg))
prereg_perc_journals <- data.table(prereg_journals$prop.row)
colnames(prereg_perc_journals) <- c("journal_name", "prereg", "percent")
prereg_journal_filtered <- prereg_perc_journals %>%
filter(prereg_perc_journals$prereg == "Preregistered")
prereg_journal_filtered <- merge.data.table(prereg_journal_filtered, prereg_journal_zeros_filtered)
prereg_journal_filtered <- filter(prereg_journal_filtered, n!=2)
View(prereg_journal_filtered)
prereg_journal_filtered <- as.numeric(as.character(prereg_journal_filtered$total))
prereg_journal_filtered$total <- as.numeric(as.character(prereg_journal_filtered$total))
prereg_journal_filtered$total <- as.numeric(prereg_journal_filtered$total)
prereg_journal_filtered <- prereg_perc_journals %>%
filter(prereg_perc_journals$prereg == "Preregistered")
prereg_journal_filtered <- merge.data.table(prereg_journal_filtered, prereg_journal_zeros_filtered)
prereg_journal_filtered <- filter(prereg_journal_filtered, n!=2)
#Multiply percent by 100
#Put n on top of each bar graph
prereg_journal_filtered$total <- as.numeric(prereg_journal_filtered$total)
View(prereg_journal_filtered)
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5)) +
stat_bin(geom = "text", aes(label = total, vjust = 1))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5)) +
stat_bin(geom = "text", aes(label = "total", vjust = 1))
stat_bin(prereg_journal_filtered, geom = "text", aes(label = total, vjust = 1))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5)) +
stat_bin(breaks=breaks, geom = "text", aes(label = total, vjust = 1))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5)) +
stat_bin(geom = 'text', aes(label = total, vjust = 1))
stat_bin(geom = "text", aes(label = total, vjust = 1))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5)) +
stat_bin(geom = "text", aes(label = total, vjust = 1))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
stat_bin(geom = "text", aes(label = total, vjust = 1)) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
View(prereg_journal_filtered)
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
geom_text(
aes(label = total),
colour = "white", size = 3,
vjust = 1.5) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
geom_text(
aes(label = total),
colour = "white", size = 2,
vjust = 2) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
prereg_journals <- with(data, CrossTable(journal_name, prereg_bool,
prop.chisq = FALSE, missing.include = FALSE))
View(prereg_journals)
prereg_journals[["prop.col"]]
prereg_journals[["t"]]
prereg_journals <- with(data, CrossTable(journal_name, prereg_bool,
prop.chisq = FALSE, missing.include = FALSE))
View(prereg_journals)
prereg_journals[["prop.tbl"]]
prereg_journals[["prop.col"]]
prereg_journals[["t"]]
prereg_journal_zeros <- data.table(prereg_journals$t)
View(prereg_journal_zeros)
View(prereg_journals)
prereg_journals[["t"]]
prereg_journals[["prop.col"]]
prereg_journal_zeros_prereg <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Preregistered")
prereg_journals <- with(data, CrossTable(journal_name, prereg_bool,
prop.chisq = FALSE, missing.include = FALSE))
#Define journals that have no experiments
prereg_journal_zeros <- data.table(prereg_journals$t)
colnames(prereg_journal_zeros) <- c("journal_name", "prereg", "total")
prereg_journal_zeros_1 <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Preregistered")
View(prereg_journal_zeros_1)
prereg_journal_zeros_2 <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Not preregistered")
prereg_journal_zeros_filtered <- merge.data.table(prereg_journal_zeros_1, prereg_journal_zeros_2)
View(prereg_journal_filtered)
data <- read.csv("/Volumes/PortableSSD/trust_us/output/109k_papers_all_coded_for_pub1.csv")
#Edit variables for SI and DA
data$od_stat_bool <- ifelse(data$stat_bool!=1, NA,
ifelse(data$dv_doi_bool == 1, 1, 0))
data$od_stat_bool <- recode_factor(data$od_stat_bool, "1" = "Open Data",
"0" = "No Data")
data$od_data_bool <- ifelse(data$data_bool!=1, NA,
ifelse(data$dv_doi_bool == 1, 1, 0))
data$journal_name <- factor(data$journal_name)
#Edit variables for preregistration
data$prereg_bool <- ifelse(data$exp_bool !=1, NA,
ifelse(data$prereg_score == 2, 1, 0))
data$prereg_bool <- recode_factor(data$prereg_bool, "1" = "Preregistered",
"0" = "Not preregistered")
prereg_journals <- with(data, CrossTable(journal_name, prereg_bool,
prop.chisq = FALSE, missing.include = FALSE))
#Define journals that have no experiments
prereg_journal_zeros <- data.table(prereg_journals$t)
colnames(prereg_journal_zeros) <- c("journal_name", "prereg", "total")
prereg_journal_zeros_1 <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Preregistered")
prereg_journal_zeros_2 <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Not preregistered")
View(prereg_journal_zeros_1)
View(prereg_journal_zeros_2)
View(prereg_journal_zeros_1)
prereg_journal_zeros_1 <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Preregistered")
colnames(prereg_journal_zeros_1) <- c("journal_name", "prereg", "1")
prereg_journal_zeros_1 <- subset(prereg_journal_zeros_1, select = -c(prereg))
prereg_journal_zeros_2 <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Not preregistered")
colnames(prereg_journal_zeros_2) <- c("journal_name", "prereg", "2")
prereg_journal_zeros_2 <- subset(prereg_journal_zeros_2, select = -c(prereg))
View(prereg_journal_zeros_1)
View(prereg_journal_zeros_2)
prereg_journal_zeros_filtered <- merge.data.table(prereg_journal_zeros_1, prereg_journal_zeros_2)
View(prereg_journal_zeros)
View(prereg_journal_zeros_filtered)
prereg_journal_zeros_filtered$total <- c(prereg_journal_zeros_filtered$"1"+prereg_journal_zeros_filtered$"2")
View(prereg_journal_zeros_filtered)
prereg_journal_zeros_filtered$total_exp <- c(prereg_journal_zeros_filtered$"1"+prereg_journal_zeros_filtered$"2")
View(prereg_journal_zeros_filtered)
prereg_journals <- with(data, CrossTable(journal_name, prereg_bool,
prop.chisq = FALSE, missing.include = FALSE))
#Define journals that have no experiments
prereg_journal_zeros <- data.table(prereg_journals$t)
colnames(prereg_journal_zeros) <- c("journal_name", "prereg", "total")
prereg_journal_zeros_1 <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Preregistered")
colnames(prereg_journal_zeros_1) <- c("journal_name", "prereg", "1")
prereg_journal_zeros_1 <- subset(prereg_journal_zeros_1, select = -c(prereg))
prereg_journal_zeros_2 <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Not preregistered")
colnames(prereg_journal_zeros_2) <- c("journal_name", "prereg", "2")
prereg_journal_zeros_2 <- subset(prereg_journal_zeros_2, select = -c(prereg))
prereg_journal_zeros_filtered <- merge.data.table(prereg_journal_zeros_1, prereg_journal_zeros_2)
prereg_journal_zeros_filtered$total_exp <- c(prereg_journal_zeros_filtered$"1"+prereg_journal_zeros_filtered$"2")
View(prereg_journal_zeros_filtered)
prereg_journals <- with(data, CrossTable(journal_name, prereg_bool,
prop.chisq = FALSE, missing.include = FALSE))
#Define journals that have no experiments
prereg_journal_zeros <- data.table(prereg_journals$t)
colnames(prereg_journal_zeros) <- c("journal_name", "prereg", "total")
prereg_journal_zeros_1 <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Preregistered")
colnames(prereg_journal_zeros_1) <- c("journal_name", "prereg", "was_prereg")
prereg_journal_zeros_1 <- subset(prereg_journal_zeros_1, select = -c(prereg))
prereg_journal_zeros_2 <- prereg_journal_zeros %>%
filter(prereg_journal_zeros$prereg == "Not preregistered")
colnames(prereg_journal_zeros_2) <- c("journal_name", "prereg", "no_prereg")
prereg_journal_zeros_2 <- subset(prereg_journal_zeros_2, select = -c(prereg))
prereg_journal_zeros_filtered <- merge.data.table(prereg_journal_zeros_1, prereg_journal_zeros_2)
prereg_journal_zeros_filtered$total_exp <- c(prereg_journal_zeros_filtered$"1"+prereg_journal_zeros_filtered$"2")
View(prereg_journal_zeros_filtered)
prereg_journal_zeros_filtered$total_exp <- c(prereg_journal_zeros_filtered$was_prereg+prereg_journal_zeros_filtered$no_prereg)
View(prereg_journal_zeros_filtered)
View(prereg_journal_zeros_filtered)
prereg_journal_zeros_filtered$no_prereg <- ifelse(prereg_journal_zeros_filtered$no_prereg != 0, 1, 2)
View(prereg_journal_zeros_filtered)
View(prereg_journal_zeros_filtered)
View(prereg_journal_zeros_filtered)
prereg_perc_journals <- data.table(prereg_journals$prop.row)
colnames(prereg_perc_journals) <- c("journal_name", "prereg", "percent")
prereg_journal_filtered <- prereg_perc_journals %>%
filter(prereg_perc_journals$prereg == "Preregistered")
prereg_journal_filtered <- merge.data.table(prereg_journal_filtered, prereg_journal_zeros_filtered)
prereg_journal_filtered <- filter(prereg_journal_filtered, n!=2)
View(prereg_perc_journals)
prereg_journal_filtered <- prereg_perc_journals %>%
filter(prereg_perc_journals$prereg == "Preregistered")
View(prereg_journal_zeros_filtered)
View(prereg_journal_filtered)
View(prereg_journal_filtered)
View(prereg_journal_zeros_filtered)
prereg_journal_filtered <- merge.data.table(prereg_journal_filtered, prereg_journal_zeros_filtered)
View(prereg_journal_filtered)
View(prereg_journal_zeros_filtered)
prereg_journal_filtered <- merge.data.table(prereg_journal_filtered, prereg_journal_zeros_filtered, by = journal_name)
prereg_journal_filtered <- merge.data.table(prereg_journal_filtered, prereg_journal_zeros_filtered, by = "journal_name")
View(prereg_journal_filtered)
prereg_journal_filtered <- filter(prereg_journal_filtered, n!=2)
View(prereg_journal_filtered)
prereg_journal_filtered <- filter(prereg_journal_filtered, no_prereg!=2)
prereg_journal_filtered$total <- as.numeric(prereg_journal_filtered$total)
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
geom_text(
aes(label = total_exp),
colour = "white", size = 2,
vjust = 2) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
geom_text(
aes(label = total_exp),
colour = "white", size = 3,
vjust = 2) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
geom_text(
aes(label = total_exp),
colour = "white", size = 2,
vjust = 2) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
prereg_journal_filtered$percent <- c(prereg_journal_filtered$percent*100)
View(prereg_journal_filtered)
prereg_journal_filtered$total <- as.numeric(prereg_journal_filtered$total)
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,1)) +
geom_text(
aes(label = total_exp),
colour = "white", size = 2,
vjust = 2) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 1, by = 0.1), limits = c(0,100)) +
geom_text(
aes(label = total_exp),
colour = "white", size = 2,
vjust = 2) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 100, by = 0.1), limits = c(0,100)) +
geom_text(
aes(label = total_exp),
colour = "white", size = 2,
vjust = 2) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 100, by = 10), limits = c(0,100)) +
geom_text(
aes(label = total_exp),
colour = "white", size = 2,
vjust = 2) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 100, by = 10), limits = c(0,100)) +
geom_text(
aes(label = total_exp),
colour = "white", size = 2,
vjust = 2) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
ggplot(prereg_journal_filtered, aes(x=journal_name, y=percent, group = 1)) + geom_bar(stat="identity") +
scale_y_continuous(breaks = seq(0, 100, by = 10), limits = c(0,100)) +
geom_text(
aes(label = total_exp),
colour = "white", size = 2,
vjust = 2) +
theme_light() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
labs(title = "Percentage of experiments that were preregistered by journal (2010-2021)",
x = "Journal", y = "Percent") +
theme(plot.title = element_text(hjust = 0.5))
data <- read.csv("/Volumes/PortableSSD/trust_us/output/109k_papers_all_coded_for_pub1.csv")
View(data)
